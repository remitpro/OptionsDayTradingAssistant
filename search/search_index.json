{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Options Day-Trading Assistant (Robust Edition)","text":"<p>An enterprise-grade, robust trading assistant for identifying high-probability options trades. Now featuring a web dashboard, portfolio risk management, and rigorous data validation.</p>"},{"location":"#important-disclaimers","title":"\u26a0\ufe0f Important Disclaimers","text":"<p>Disclaimer</p> <p>This is a decision-support tool, NOT financial advice.</p> <ul> <li>All trades carry risk of loss.</li> <li>This system does NOT execute trades automatically.</li> <li>Requires manual review and execution in ThinkorSwim.</li> <li>Paper trade first before using with real money.</li> </ul>"},{"location":"#key-features","title":"\ud83d\ude80 Key Features","text":""},{"location":"#robust-foundation","title":"\ud83d\udee1\ufe0f Robust Foundation","text":"<ul> <li>Circuit Breakers: Protects against API failures.</li> <li>Strict Validation: All data is validated using Pydantic models.</li> <li>Stale Data Protection: Rejects market data older than 60 seconds.</li> <li>Health Monitoring: Self-checks disk, DB, and API connectivity.</li> </ul>"},{"location":"#advanced-analytics","title":"\ud83e\udde0 Advanced Analytics","text":"<ul> <li>Real-Time Greeks: Calculated using <code>py_vollib</code> (Black-Scholes).</li> <li>Portfolio Risk Manager: Aggregates risk (Delta, Theta) across all positions.</li> <li>Technical Indicators: RSI, MACD, Bollinger Bands, ATR.</li> <li>Anomaly Detection: Filters out \"bad ticks\" and flash crashes.</li> </ul>"},{"location":"#modern-dashboard","title":"\ud83d\udda5\ufe0f Modern Dashboard","text":"<ul> <li>Web UI: Built with Streamlit for real-time monitoring.</li> <li>Trade Journal: Searchable database of all historical trades.</li> <li>Live Scanner: Real-time view of potential opportunities.</li> </ul>"},{"location":"#requirements","title":"\ud83d\udccb Requirements","text":"<ul> <li>Python 3.11+</li> <li>TD Ameritrade Developer Account (or Schwab API access)</li> <li><code>streamlit</code>, <code>pandas</code>, <code>sqlalchemy</code>, <code>tenacity</code>, <code>py_vollib</code></li> </ul>"},{"location":"#quick-start","title":"\ud83d\ude80 Quick Start","text":"<p>For detailed instructions, see the Installation Guide.</p>"},{"location":"#1-install-dependencies","title":"1. Install Dependencies","text":"<pre><code>pip install -r requirements.txt\n</code></pre>"},{"location":"#2-configure-api","title":"2. Configure API","text":"<p>Copy <code>.env.example</code> to <code>.env</code> and add your keys.</p>"},{"location":"#3-launch-dashboard","title":"3. Launch Dashboard","text":"<p><pre><code>run_dashboard.bat\n</code></pre> (Or <code>streamlit run src/ui/dashboard.py</code> on Mac/Linux)</p>"},{"location":"#workflow","title":"\ud83d\udcca Workflow","text":"<ol> <li>Scan: <code>MarketScanner</code> finds stocks passing RSI/ATR/Volume filters.</li> <li>Filter: <code>OptionsFilter</code> finds liquid options contracts.</li> <li>Analyze: <code>GreeksCalculator</code> computes real Delta/Theta.</li> <li>Validate: <code>DataValidator</code> ensures data is fresh and valid.</li> <li>Risk Check: <code>PortfolioManager</code> ensures new trade doesn't exceed portfolio limits.</li> <li>Store: Trade is saved to <code>trades.db</code> (SQLite).</li> <li>Visualize: Trade appears on the Dashboard.</li> </ol>"},{"location":"#data-persistence","title":"\ud83d\udcc2 Data &amp; Persistence","text":"<ul> <li>Database: All trades are saved to <code>outputs/trades.db</code>.</li> <li>Artifacts: Alerts and Watchlists are still generated in <code>outputs/</code>.</li> </ul>"},{"location":"#verification","title":"\ud83e\uddea Verification","text":"<p>To ensure the system is healthy: <pre><code>python verify_health.py\n</code></pre></p>"},{"location":"#production-deployment-flyio","title":"\u2601\ufe0f Production Deployment (Fly.io)","text":"<p>For deployment instructions, see the Deployment Guide.</p>"},{"location":"developer/api/","title":"API Reference","text":"<p>This section documents the key classes and methods used in the Options Day-Trading Assistant.</p>"},{"location":"developer/api/#core-modules","title":"Core Modules","text":""},{"location":"developer/api/#srcscannermarketscanner","title":"<code>src.scanner.MarketScanner</code>","text":"<p>The <code>MarketScanner</code> class is responsible for identifying potential stock candidates based on technical indicators.</p>"},{"location":"developer/api/#scan_marketsymbols-liststr-listdict","title":"<code>scan_market(symbols: List[str]) -&gt; List[Dict]</code>","text":"<p>Scans a list of symbols and returns those matching the criteria.</p> <ul> <li>symbols: List of stock tickers to scan.</li> <li>Returns: A list of dictionaries containing symbol data (price, volume, RSI, ATR).</li> </ul>"},{"location":"developer/api/#srcscanneroptionsfilter","title":"<code>src.scanner.OptionsFilter</code>","text":"<p>The <code>OptionsFilter</code> class selects optimal options contracts for a given stock.</p>"},{"location":"developer/api/#filter_optionssymbol-str-listdict","title":"<code>filter_options(symbol: str) -&gt; List[Dict]</code>","text":"<p>Retrieves the option chain and filters for liquid contracts.</p> <ul> <li>symbol: Stock ticker.</li> <li>Returns: a list of valid option contracts (calls/puts).</li> </ul>"},{"location":"developer/api/#srcanalyticsprobabilitycalculator","title":"<code>src.analytics.ProbabilityCalculator</code>","text":"<p>Calculates probability of profit using Monte Carlo simulations and Black-Scholes model.</p>"},{"location":"developer/api/#calculate_probabilitiestrade-dict-dict","title":"<code>calculate_probabilities(trade: Dict) -&gt; Dict</code>","text":"<ul> <li>trade: Trade dictionary containing entry price, strike price, DTE, and IV.</li> <li>Returns: Dictionary with <code>probability_itm</code>, <code>probability_otm</code>, and <code>expected_value</code>.</li> </ul>"},{"location":"developer/api/#srcscoringtradescorer","title":"<code>src.scoring.TradeScorer</code>","text":"<p>Assigns a score to each potential trade based on weighted factors.</p>"},{"location":"developer/api/#score_tradetrade-dict-float","title":"<code>score_trade(trade: Dict) -&gt; float</code>","text":"<ul> <li>trade: The trade object to score.</li> <li>Returns: A float between 0 and 100 representing the trade quality.</li> </ul>"},{"location":"developer/api/#configuration","title":"Configuration","text":"<p>Settings are managed via <code>pydantic-settings</code> in <code>config/settings.py</code>.</p>"},{"location":"developer/api/#settings-class","title":"<code>Settings</code> Class","text":"<ul> <li><code>TDA_API_KEY</code>: TD Ameritrade API Key.</li> <li><code>DATABASE_URL</code>: Database connection string.</li> <li><code>MIN_STOCK_PRICE</code>: Minimum stock price for scanning (default: $20).</li> <li><code>MAX_STOCK_PRICE</code>: Maximum stock price for scanning (default: $300).</li> <li><code>MIN_TRADE_SCORE</code>: Minimum score required to alert a trade (default: 70).</li> </ul>"},{"location":"developer/architecture/","title":"Architecture Overview","text":"<p>This document describes the high-level architecture of the Options Day-Trading Assistant, built to identify high-probability options trades across the market.</p>"},{"location":"developer/architecture/#system-components","title":"System Components","text":"<p>The system is composed of several key modules, orchestrated to deliver reliable trade signals.</p>"},{"location":"developer/architecture/#1-market-scanner","title":"1. Market Scanner","text":"<ul> <li>Role: Continuously scans the market for potential candidates.</li> <li>Filters: RSI (&lt; 30, &gt; 70), ATR (&gt; 1.5), Volume (&gt; 1M).</li> <li>Output: List of candidate symbols.</li> </ul>"},{"location":"developer/architecture/#2-options-filter","title":"2. Options Filter","text":"<ul> <li>Role: Selects the best options contracts for each candidate.</li> <li>Criteria:<ul> <li>Liquidity: Open Interest (&gt; 1000), Volume (&gt; 300).</li> <li>Spread: Tight bid-ask spreads (&lt; 5%).</li> <li>DTE: 0-7 days typically.</li> </ul> </li> <li>Strategies: Supports Calls, Puts, Iron Condors, Vertical Spreads.</li> </ul>"},{"location":"developer/architecture/#3-analytics-engine","title":"3. Analytics Engine","text":"<ul> <li>Role: Calculates Greeks and theoretical values.</li> <li>Library: <code>py_vollib</code> (Black-Scholes).</li> <li>Metrics: Delta, Gamma, Theta, Vega, Implied Volatility (IV).</li> </ul>"},{"location":"developer/architecture/#4-risk-manager","title":"4. Risk Manager","text":"<ul> <li>Role: Validates trades against portfolio risk limits.</li> <li>Checks:<ul> <li>Max Position Size</li> <li>Max Loss per Trade</li> <li>Correlation checks (prevent over-exposure to a sector).</li> </ul> </li> </ul>"},{"location":"developer/architecture/#5-trade-scorer","title":"5. Trade Scorer","text":"<ul> <li>Role: Assigns a final score (0-100) to each trade.</li> <li>Inputs: Probability of Profit (POP), Risk/Reward Ratio, IV Rank, Technical Score.</li> <li>Configuration: Weights are adjustable in <code>config/settings.py</code>.</li> </ul>"},{"location":"developer/architecture/#data-flow","title":"Data Flow","text":"<ol> <li>Input: Market Data (TDA API).</li> <li>Processing:<ul> <li>Scanner identifies stocks.</li> <li>Filter selects options.</li> <li>Analytics computes Greeks.</li> <li>Scorer ranks trades.</li> <li>Risk Manager validates.</li> </ul> </li> <li>Output:<ul> <li>Database (<code>trades.db</code>).</li> <li>Alerts (ThinkScript).</li> <li>Watchlists (CSV).</li> <li>Dashboard (Streamlit).</li> </ul> </li> </ol>"},{"location":"developer/architecture/#technology-stack","title":"Technology Stack","text":"<ul> <li>Language: Python 3.11+</li> <li>Web Framework: Streamlit</li> <li>Database: SQLite (Development), PostgreSQL (Production ready)</li> <li>API: TD Ameritrade (via <code>tda-api</code>), HTTP requests</li> <li>Containerization: Docker</li> <li>Deployment: Fly.io</li> </ul>"},{"location":"developer/code-structure/","title":"Code Structure","text":"<p>The project is structured as follows:</p> <pre><code>OptionsDayTradingAssistant/\n\u251c\u2500\u2500 config/                 # Configuration files\n\u2502   \u251c\u2500\u2500 settings.py         # Application settings (Pydantic models)\n\u2502   \u2514\u2500\u2500 token.json          # TDA Authentication token (ignored)\n\u251c\u2500\u2500 docs/                   # Documentation (MkDocs)\n\u251c\u2500\u2500 logs/                   # System logs\n\u251c\u2500\u2500 outputs/                # Generated artifacts\n\u2502   \u251c\u2500\u2500 alerts/             # ThinkScript alerts\n\u2502   \u251c\u2500\u2500 trades/             # JSON trade snapshots\n\u2502   \u2514\u2500\u2500 watchlists/         # CSV watchlists\n\u251c\u2500\u2500 src/                    # Source code\n\u2502   \u251c\u2500\u2500 analytics/          # Greeks, Probability, Risk Metrics\n\u2502   \u2502   \u251c\u2500\u2500 greeks.py       # Greeks calculation logic\n\u2502   \u2502   \u251c\u2500\u2500 probability.py  # Monte Carlo simulation\n\u2502   \u2502   \u2514\u2500\u2500 risk_metrics.py # Risk/Reward analysis\n\u2502   \u251c\u2500\u2500 data/               # Data Access Layer\n\u2502   \u2502   \u251c\u2500\u2500 api_client.py   # TD Ameritrade client wrapper\n\u2502   \u2502   \u251c\u2500\u2500 cache.py        # Caching mechanisms\n\u2502   \u2502   \u2514\u2500\u2500 database.py     # SQLAlchemy models\n\u2502   \u251c\u2500\u2500 integration/        # External system integrations\n\u2502   \u2502   \u251c\u2500\u2500 tos_alerts.py   # ThinkScript generator\n\u2502   \u2502   \u2514\u2500\u2500 watchlist.py    # Watchlist CSV exporter\n\u2502   \u251c\u2500\u2500 scanner/            # Core scanning logic\n\u2502   \u2502   \u251c\u2500\u2500 market_scanner.py # Stock screener\n\u2502   \u2502   \u2514\u2500\u2500 options_filter.py # Options chain filter\n\u2502   \u251c\u2500\u2500 scoring/            # Trade scoring engine\n\u2502   \u2502   \u2514\u2500\u2500 trade_scorer.py # Weighted scoring algorithm\n\u2502   \u251c\u2500\u2500 strategies/         # Option strategy definitions\n\u2502   \u2502   \u2514\u2500\u2500 strategy_selector.py # Strategy selection logic\n\u2502   \u251c\u2500\u2500 ui/                 # Streamlit dashboard\n\u2502   \u2502   \u2514\u2500\u2500 dashboard.py    # Main UI application\n\u2502   \u2514\u2500\u2500 utils/              # Helper utilities\n\u2502       \u251c\u2500\u2500 health.py       # System health checks\n\u2502       \u2514\u2500\u2500 logger.py       # Logging configuration\n\u251c\u2500\u2500 .env.example            # Environment variables template\n\u251c\u2500\u2500 .gitignore              # Git ignore rules\n\u251c\u2500\u2500 Dockerfile              # Container definition\n\u251c\u2500\u2500 fly.toml                # Fly.io configuration\n\u251c\u2500\u2500 main.py                 # Main entry point (Scanner Loop)\n\u251c\u2500\u2500 mkdocs.yml              # Documentation configuration\n\u251c\u2500\u2500 README.md               # Project overview\n\u251c\u2500\u2500 requirements.txt        # Python dependencies\n\u251c\u2500\u2500 start.sh                # Startup script (Scanner + UI)\n\u251c\u2500\u2500 verify_analytics.py     # Verify analytics calculations\n\u251c\u2500\u2500 verify_health.py        # System health verification\n\u2514\u2500\u2500 verify_setup.py         # Installation verification script\n</code></pre>"},{"location":"developer/code-structure/#key-files","title":"Key Files","text":"<ul> <li><code>main.py</code>: The entry point for the scanning loop. Orchestrates the entire pipeline.</li> <li><code>src/ui/dashboard.py</code>: The Streamlit application entry point.</li> <li><code>src/data/api_client.py</code>: robust TDA client with circuit breakers and retries.</li> <li><code>config/settings.py</code>: Centralized configuration management using <code>pydantic-settings</code>.</li> </ul>"},{"location":"guide/deployment/","title":"Production Deployment (Fly.io)","text":"<p>This guide details how to deploy your Options Day-Trading Assistant to Fly.io for 24/7 scanning.</p>"},{"location":"guide/deployment/#1-prerequisites","title":"1. Prerequisites","text":"<ul> <li>flyctl installed</li> <li>A valid <code>token.json</code> generated locally via <code>tda-api</code> authentication flow</li> </ul>"},{"location":"guide/deployment/#2-initial-setup","title":"2. Initial Setup","text":"<p>Initialize the app with Fly.io:</p> <pre><code># Initialize the app (steps will prompt for a name)\nfly launch --no-deploy\n</code></pre> <p>This generates a <code>fly.toml</code> file tailored to your application.</p>"},{"location":"guide/deployment/#3-configure-persistence-critical","title":"3. Configure Persistence (CRITICAL)","text":"<p>The application requires persistent storage for: -   TDA Token: The API token must be refreshed periodically. Ephemeral containers lose this file on restarts. -   Trade Database: Your trade history (<code>trades.db</code>) should persist across deployments. -   Logs: System logs for troubleshooting.</p> <p>Create a volume in your preferred region (e.g., <code>iad</code>):</p> <pre><code>fly volumes create options_data --region iad --size 1\n</code></pre> <p>Confirm the volume is created:</p> <pre><code>fly volumes list\n</code></pre>"},{"location":"guide/deployment/#4-set-environment-secrets","title":"4. Set Environment Secrets","text":"<p>Configure your sensitive environment variables using Fly's secrets management:</p> <pre><code>fly secrets set \\\n    TDA_API_KEY=your_api_key_here \\\n    DATABASE_URL=\"sqlite:////data/trades.db\"\n</code></pre>"},{"location":"guide/deployment/#5-deploy","title":"5. Deploy","text":"<p>Deploy the application:</p> <pre><code>fly deploy\n</code></pre> <p>Wait for the deployment to complete.</p>"},{"location":"guide/deployment/#6-upload-token-critical","title":"6. Upload Token (CRITICAL)","text":"<p>The TDA API requires a valid token file to refresh sessions. Since this file is not checked into version control, you MUST upload your local <code>token.json</code> to the persistent volume on the running machine.</p> <ol> <li> <p>Open an SFTP shell to the running VM:     <pre><code>fly sftp shell\n</code></pre></p> </li> <li> <p>Upload the token file:     <pre><code>put config/token.json /data/token.json\n</code></pre></p> </li> <li> <p>Exit the shell (<code>exit</code>).</p> </li> </ol> <p>Once uploaded, the app will automatically pick up the token from <code>/data/token.json</code> (configured via <code>fly.toml</code> environment variables).</p>"},{"location":"guide/deployment/#7-configuration-details-flytoml","title":"7. Configuration Details (<code>fly.toml</code>)","text":"<p>Ensure your <code>fly.toml</code> is configured correctly:</p> <pre><code>[env]\n  TDA_TOKEN_PATH = \"/data/token.json\"\n  LOG_PATH = \"/data/logs\"\n  OUTPUT_DIR = \"/data/outputs\"\n\n[mounts]\n  source = \"options_data\"\n  destination = \"/data\"\n</code></pre> <p>This maps the persistent volume to <code>/data</code> inside the container and points the application to use paths within that volume.</p>"},{"location":"guide/deployment/#8-accessing-the-dashboard","title":"8. Accessing the Dashboard","text":"<p>Once deployed, your application will be available at:</p> <pre><code>https://your-app-name.fly.dev\n</code></pre> <p>The Streamlit dashboard runs on port 8080.</p>"},{"location":"guide/deployment/#troubleshooting","title":"Troubleshooting","text":"<ul> <li>Logs: Check application logs using <code>fly logs</code>.</li> <li>Status: Check machine status with <code>fly status</code>.</li> <li>Restart: If the token expires or issues occur, restart the app with <code>fly apps restart options-day-trading-assistant</code>.</li> </ul>"},{"location":"guide/deployment/#updates","title":"Updates","text":"<p>To deploy code changes:</p> <pre><code>fly deploy\n</code></pre>"},{"location":"guide/installation/","title":"Installation Guide","text":"<p>This guide will help you install and configure the Options Day-Trading Assistant on your local machine.</p>"},{"location":"guide/installation/#prerequisites","title":"Prerequisites","text":"<ul> <li>Python 3.11 or newer.</li> <li>Git for version control.</li> <li>TD Ameritrade Developer Account (or Schwab API access) for API keys.<ul> <li>TD Ameritrade Developers</li> </ul> </li> </ul>"},{"location":"guide/installation/#step-1-clone-the-repository","title":"Step 1: Clone the Repository","text":"<p>Clone the project to your local machine:</p> <pre><code>git clone https://github.com/yourusername/OptionsDayTradingAssistant.git\ncd OptionsDayTradingAssistant\n</code></pre>"},{"location":"guide/installation/#step-2-create-a-virtual-environment","title":"Step 2: Create a Virtual Environment","text":"<p>It is recommended to use a virtual environment to manage dependencies.</p> <pre><code>python -m venv venv\n# Activate the virtual environment\n# Windows:\nvenv\\Scripts\\activate\n# Mac/Linux:\nsource venv/bin/activate\n</code></pre>"},{"location":"guide/installation/#step-3-install-dependencies","title":"Step 3: Install Dependencies","text":"<p>Install the required Python packages:</p> <pre><code>pip install -r requirements.txt\n</code></pre>"},{"location":"guide/installation/#step-4-environment-configuration","title":"Step 4: Environment Configuration","text":"<p>Create a <code>.env</code> file in the root directory by copying the <code>.env.example</code> file:</p> <pre><code>cp .env.example .env\n</code></pre> <p>Open <code>.env</code> and fill in your details:</p> <pre><code># .env file content\nTDA_API_KEY=your_api_key_here\nTDA_REDIRECT_URI=http://localhost\n\n# Optional: Adjust scanner parameters\n# MIN_STOCK_PRICE=20.0\n# MAX_STOCK_PRICE=300.0\n</code></pre>"},{"location":"guide/installation/#step-5-verify-installation","title":"Step 5: Verify Installation","text":"<p>Run the verification script to ensure everything is set up correctly:</p> <pre><code>python verify_setup.py\n</code></pre> <p>If checks pass, you are ready to use the application!</p>"},{"location":"guide/user-guide/","title":"User Guide","text":"<p>This section explains how to use the dashboard and scanner.</p>"},{"location":"guide/user-guide/#dashboard-overview","title":"Dashboard Overview","text":"<p>The dashboard is built with Streamlit and provides real-time monitoring of your options trading system.</p>"},{"location":"guide/user-guide/#running-the-dashboard","title":"Running the Dashboard","text":"<pre><code>streamlit run src/ui/dashboard.py\n</code></pre>"},{"location":"guide/user-guide/#key-sections","title":"Key Sections","text":"<ol> <li> <p>Dashboard:</p> <ul> <li>Portfolio Overview: Shows total trades, trades today, and other key metrics.</li> <li>Recent Activity: Displays the most recent trades found by the scanner.</li> <li>Risk Distribution: Visualizes the risk distribution across your portfolio.</li> </ul> </li> <li> <p>Scanner Results:</p> <ul> <li>Displays the raw output from the scanner.</li> <li>(Integration pending: connect to live scanner output)</li> </ul> </li> <li> <p>Trade Journal:</p> <ul> <li>Search: Filter trades by symbol.</li> <li>Table: View all historical trades with details like strategy, bias, strikes, DTE, score, and more.</li> </ul> </li> <li> <p>System Health:</p> <ul> <li>Status Check: Run a health check on the API, database, and disk.</li> <li>Metrics: View API latency and connection status.</li> </ul> </li> </ol>"},{"location":"guide/user-guide/#scanner-workflow","title":"Scanner Workflow","text":"<p>The scanner is the core engine of the system. It runs in the background and continuously scans for opportunities.</p>"},{"location":"guide/user-guide/#manual-scanner-execution","title":"Manual Scanner Execution","text":"<p>To run the scanner manually (useful for testing or one-off scans):</p> <pre><code>python main.py\n</code></pre> <p>This will run a single scan cycle and output the results to the console.</p>"},{"location":"guide/user-guide/#automated-scanner","title":"Automated Scanner","text":"<p>To run the scanner continuously in the background, use the <code>start.sh</code> script (or <code>bat</code> file on Windows):</p> <pre><code>./start.sh\n</code></pre> <p>This script loops the scanner every 15 minutes.</p>"},{"location":"guide/user-guide/#interpreting-trade-alerts","title":"Interpreting Trade Alerts","text":"<p>The system generates alerts based on its analysis.</p> <ul> <li> <p>Score: Each trade is assigned a score (0-100) based on probability, risk/reward, and technical indicators.</p> <ul> <li>&gt; 80: High probability setup.</li> <li>60-80: Moderate setups.</li> <li>&lt; 60: Generally ignored.</li> </ul> </li> <li> <p>Risk/Reward (R/R): Ratio of Max Gain to Max Loss. Higher is better.</p> </li> <li>Greeks: Delta, Gamma, Theta, Vega are calculated for each option leg.</li> </ul>"},{"location":"guide/user-guide/#exporting-data","title":"Exporting Data","text":"<ul> <li>Watchlists: Generated CSV files in <code>outputs/watchlists/</code> can be imported into ThinkorSwim.</li> <li>Alerts: ThinkScript alert code in <code>outputs/alerts/</code> can be pasted into ThinkorSwim studies.</li> </ul>"}]}